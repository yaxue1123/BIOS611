---
title: "homework1"
author: "Yaxue Guo"
date: "8/27/2018"
output: html_document
---
---
  title: "BIOS 611 HW1 Data visualisation (Chapter 3)"
  author: "(Your full name here)"
  date: "`r format(Sys.time(), '%m/%d/%Y')`"
  output: html_document
---
  *This homework is due September 5th 6pm.*
  
  (This set of exercise is mostly taken from R for Data Science by Garrett Grolemund and Hadley Wickham.)

# Exercise 1

1.  What's gone wrong with this code? Why are the points not blue?

    ```{r warning = FALSE}
    library(ggplot2)
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = displ, y = hwy, color = "blue"))
    ```
    
    Answer: 

    ```{r}
    library(ggplot2)
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = displ, y = hwy), color = "blue")
    ```
    * Color here doesn't convey information of a variable but only changes the appearance of the plot, so it should be outside the mapping argument.
    

2.  Which variables in `mpg` are categorical? Which variables are continuous? 
    (Hint: type `?mpg` to read the documentation for the dataset). How
    can you see this information when you run `mpg`?

    Answer: 

    ```{r}
    mpg
    ```
    
    * Categorical: manufacturer, model, trans, drv, fl, class
    
    * Continuous: displ, year, cyl, cty, hwy 
   

3.  Map a continuous variable to `color`, `size`, and `shape`. How do
    these aesthetics behave differently for categorical vs. continuous
    variables? 
    
    Answer: 

    ```{r}
    ggplot( data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = cty))

    ```
    
    * When mapped to color, aesthetics choose a scale of colors instead of discrete colors for continuous variables' levels. In this case, from darker blue (lower hwy) to lighter blue (higher hwy).

    
    ```{r}
    ggplot( data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, size = cty))

    ```
    * When mapped to size, aesthetics assign different sizes of dots according to the value to cty. But the legend only shows representative ones instead of a continuous legend as mapping to color.
    ```{r}

    ```
    * Got an error message that "A continues variable cannot be mapped to shape". I think it is because that there are only limited kinds of shapes while a continuous variable could be unlimited.
    
4.  What happens if you map the same variable to multiple aesthetics? 

    Answer: 

    ```{r}
    ggplot( data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = displ, size = hwy))
    ```
    
    In the plot above, hwy is mapped to y axis as well as size, and displ is mapped to both x axis and color, which is unnecessary because we have already had idea of hwy and displ values through x-y coordinate thus do not need extra color or size information to facilitate understanding. 

5.  What does the `stroke` aesthetic do? What shapes does it work with?
    (Hint: use `?geom_point`)
    
    Answer: 

    ```{r}
    ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy), shape = 22, stroke = 3)
    ```
    
    `stroke' can change the border of shapes.The bigger the stroke is, the wider the border is.
    
6.  What happens if you map an aesthetic to something other than a variable 
    name, like `aes(colour = displ < 5)`?  

    Answer: 

    ```{r}
    ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = displ < 5))
    ```
   
    The color will follow true or false of the condition when you map the aesthetic.

# Exercise 2

1.  What do the empty cells in plot with `facet_grid(drv ~ cyl)` mean?
    How do they relate to this plot?
    
    ```{r, eval = FALSE}
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = drv, y = cyl))
    ```

    Answer: 

    ```{r}
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = displ, y = hwy)) + 
      facet_grid(drv ~ cyl)
    ```
    
    The empty cells mean that there are no values fitting such condition.For example, no car in the mpg database has 4 cylindars as well as being 4-wheel-drive. The relation between two plots is that there is no dot on (4,5), (r,4) and (r,5) in plot 1, which is the same in plot 2.

2.  What plots does the following code make? What does `.` do?

    ```{r eval = FALSE}
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = displ, y = hwy)) +
      facet_grid(drv ~ .)
    
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = displ, y = hwy)) +
      facet_grid(. ~ cyl)
    ```

    Answer: 

    ```{r}

    ```
    * The first code facets by values of drv (whether the car is front-wheel-drive, rear-wheel-drive or 4-wheel-drive);
    
    * The second code facets by values of displ (whether the car has 4,5,6,8 engine displacements);
    
    * The simple `.` ignores that dimension of facet.
    
3.  Take the first faceted plot in this section:

    ```{r, eval = FALSE}
    ggplot(data = mpg) + 
      geom_point(mapping = aes(x = displ, y = hwy)) + 
      facet_wrap(~ class, nrow = 2)
    ```
    
    What are the advantages to using faceting instead of the colour aesthetic?
    What are the disadvantages? How might the balance change if you had a 
    larger dataset?
    
    Answer: 

    ```{r}

    ```
    * Advantage: Easier and clearer to tell categories. Less data points in each plot. Better for color-blind people.Easier to tell similarity and difference of patterns between different categories.
    * Disadvantage: Could occupy too much space if there is many categories, especially when empty cells are at a large portion, this way is space-wasting. Harder to compare individual points' location and the relationship.
    * If I have a larger dataset, I would prefer using facet plot first since there would be less overlapping. But I will also use color, size or alpha to facilitate the visualiztion as an addition if there aren't too many categories.
    
# Exercise 3

1.  What geom would you use to draw a line chart? A boxplot? 
    A histogram? An area chart?

    Answer: 

    ```{r}

    ```
    * line chart: `geom_line()`
    * boxplot: `geom_boxplot()`
    * histogram: `geom_hist()`
    * area chart: `geom_area()`
    
2.  Run this code in your head and predict what the output will look like.
    Then, run the code in R and check your predictions.
    
    ```{r, eval = FALSE}
    ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) + 
      geom_point() + 
      geom_smooth(se = FALSE)
    ```

    Answer: 

    ```{r}
    ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) + 
      geom_point() + 
      geom_smooth()
    ```
    
    Same as what I thought...
    

3.  What does `show.legend = FALSE` do?  What happens if you remove it?  
    Why do you think I used it earlier in the chapter?

    Answer: 

    ```{r}

    ```

    `show.legend = FALSE` makes the plot not show legend. Without this, there would be a legend. In the earlier plots in the chapter, there are three plots and the first two don't have legend, so hidding the legend of the third plot could make them consistent. Also, the goal of the third plot is to show the difference between grouping and not grouping thus showing legend or not is not that important.
    
4.  What does the `se` argument to `geom_smooth()` do?


    Answer: 

    ```{r}

    ```
    
    `se` argument adds standard error bands to the lines.
    

5.  Will these two graphs look different? Why/why not?

    ```{r, eval = FALSE}
    ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
      geom_point() + 
      geom_smooth()
    
    ggplot() + 
      geom_point(data = mpg, mapping = aes(x = displ, y = hwy)) + 
      geom_smooth(data = mpg, mapping = aes(x = displ, y = hwy))
    ```

    Answer: 

    ```{r}

    ```
    
    No difference. The two pieces of code are only two expressions of the same meaning on the same dataset.

6.  Recreate the R code necessary to generate the following graphs.
    
    ![Smooth lines for each `drv`](`r "https://github.com/datasci611/datasci_src/blob/master/HW1P0306A.png?raw=true"`)
    
    
    Answer: 
    
    ```{r, echo=TRUE, eval=TRUE}
    
    ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
      geom_point( mapping = aes(color = drv)) +
      geom_smooth( mapping = aes(linetype = drv), se = FALSE)
      

    ```


    ![A single smooth line, transparency by `year`](`r "https://github.com/datasci611/datasci_src/blob/master/HW1P0306B.png?raw=true"`)
    
    Answer: 
    
    ```{r, echo=TRUE, eval=TRUE}
    ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
      geom_point(mapping = aes(color = drv, alpha = year)) +
      geom_smooth(se = FALSE)
    ```

    
    ![Layered dots and an additional text information](`r "https://github.com/datasci611/datasci_src/blob/master/HW1P0306C.png?raw=true"`)
    
    Adding texts was not covered in class, but give it a try!
    
    Answer: 
    
    ```{r, echo=TRUE, eval=TRUE}
    ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
      geom_point(size = 4, color = "white") +
      geom_point(mapping = aes(color = drv)) +
      annotate("text", x = 3, y = 45, label = "Max hwy = 44")
    ```

# Exercise 4

1.  What is the default geom associated with `stat_summary()`? How could
    you rewrite the previous plot to use that geom function instead of the 
    stat function?

    Answer: 

    ```{r}
    ggplot(data = diamonds) +
      geom_pointrange(mapping = aes(x = cut, y = depth), stat = "summary")
    ```
    
    The default geom for stat_summary is `geom_pointrange()`.

2.  What does `geom_col()` do? How is it different to `geom_bar()`?

    Answer: 

    ```{r}

    ```
    Use `geom_col()` when you want the heights of the bars to represent values in the data. And `geom_bar` uses `stat_count` by default and counts the number of cases at each x position. `geom_col' uses `stat_identity` and leaves the data as is.
    

3.  What variables does `stat_smooth()` compute? What parameters control
    its behaviour?

    Answer: 

    ```{r}

    ```
    Computed variables:
    
    * y: predicetd value
    * ymin: lower pointwise confidence interval around the mean
    * ymax: upper pointwise confidence interval around the mean
    * se: standard error
    
    `method` can control its behavior, for example, different methods including lm, glm, gam, loess.

# Exercise 5

1.  What is the problem with this plot? How could you improve it?

    ```{r}
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + 
      geom_point()
    ```
    
    Overplotting. For each `cty` and `hwy` there could be multiple values. I will use `jitter` position adjustment.

    Answer: 

    ```{r}
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + 
      geom_point(position = "jitter")
    ```

2.  What parameters to `geom_jitter()` control the amount of jittering?

    Answer: 

    ```{r}
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
     geom_point(position = position_jitter(width = 0.4))
    
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
     geom_point(position = position_jitter(height = 0.4))
    ```
    
    * `width` and `height`: amount of vertical and horizontal jitter. Defaults to 40% which means the jitter value will occupy 80% of the implied bins.

3.  Compare and contrast `geom_jitter()` with `geom_count()`.

    Answer: 

    ```{r}
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
        geom_jitter()
           
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
        geom_count()
    ```
    
    * `geom_jitter()` adds random noises to the original data points, which reduces the effect of overplotting.
    
    * `geom_count()` resizes the point according to the number of observations at each location. Points with more observations will be larger than those with fewer observations.
    

# Exercise 6

1.  Turn a stacked bar chart into a pie chart using `coord_polar()`.

    Answer: 

    ```{r}
    bar <- ggplot(data = diamonds) + 
      geom_bar(
        mapping = aes(x = factor(1), fill = cut), 
        width = 1
      )
    
    bar
    
    bar + coord_polar(theta = "y")
    ```

2.  What does `labs()` do? Read the documentation.


    Answer: 

    ```{r}
    bar <- ggplot(data = diamonds) + 
      geom_bar(
        mapping = aes(x = factor(1), fill = cut), 
        width = 1
      )
    
    bar + coord_polar(theta = "y") + labs(x = "factor(1)", y = "diamond counts", title = "pie chart for diamonds cut")
    ```
    
    The `labs()` can add text for axis, plot title or caption below the plot.

3.  What does the plot below tell you about the relationship between city
    and highway mpg? Why is `coord_fixed()` important? What does 
    `geom_abline()` do?
    
    ```{r, fig.asp = 1, out.width = "50%"}
    ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
      geom_point() + 
      geom_abline() +
      coord_fixed()
    ```

    Answer: 

    ```{r}

    ```
    * The plot tells us `hwy` and `cty` has a positive linear relationship that hwy increases about two times in amount as cty increases.
    
    * `coord_fixed` forces a fixed scale that ensures one unit on the x-axis is the same length as one unit on the y-axis. In this case, `coord_fixed` ensures the line produced by 'geom_abline' is at a 45 degree angle.
    
    * `geom_abline` draws a line defined by slope and y-axis intercept. In this case, it draws a line at a 45 degree angle for users' better preception.
